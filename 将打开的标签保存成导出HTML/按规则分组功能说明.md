# 按规则分组功能使用说明

## 功能概述

这个功能允许你根据自定义的URL匹配规则自动将浏览器标签分组，非常适合管理大量相似类型的标签页。

## 使用步骤

### 1. 设置分组规则

1. 点击扩展图标打开弹出窗口
2. 点击 **"分组设置"** 按钮（灰色齿轮图标）
3. 在打开的设置页面中添加规则

### 2. 添加规则

在设置页面填写以下信息：

#### 规则名称
- 给分组起一个有意义的名字
- 例如：`浏览_1`、`回廊_1`、`社团_1`

#### 匹配模式
- 每行输入一个URL匹配模式
- 支持通配符 `*` 匹配任意字符
- 示例：
  ```
  exhentai.org/s/*
  https://www.wnacg.com/photos-view-*
  exhentai.org/tag/artist*
  ```

#### 分组颜色
- 选择一个颜色来标识这个分组
- 可选颜色：蓝、红、黄、绿、粉、紫、青、橙、灰

### 3. 应用规则

1. 返回扩展弹出窗口
2. 点击 **"按规则分组"** 按钮（紫色图标）
3. 扩展会自动将匹配的标签页分组

## 匹配模式示例

### 基础匹配
```
exhentai.org/s/*
```
匹配所有 exhentai.org 域名下 /s/ 开头的页面

### 完整URL匹配
```
https://exhentai.org/tag/artist*
```
匹配特定协议和路径的页面

### 多个模式
```
exhentai.org/tag/artist*
exhentai.org/tag/group*
exhentai.org/g/*
```
一个规则可以包含多个匹配模式，满足任一模式即可分组

## 实际应用场景

### 场景1: 按内容类型分组
```
规则名称: 浏览_1
匹配模式:
  exhentai.org/s/*
  wnacg.com/photos-view-*
颜色: 蓝色
```

### 场景2: 按标签分组
```
规则名称: 回廊_1
匹配模式:
  exhentai.org/tag/artist*
颜色: 红色
```

### 场景3: 按社团分组
```
规则名称: 社团_1
匹配模式:
  exhentai.org/tag/group*
颜色: 绿色
```

### 场景4: 按画廊分组
```
规则名称: 画廊_4
匹配模式:
  https://exhentai.org/g/*
颜色: 紫色
```

## 功能特点

✅ **自动计数**: 分组名称会自动添加标签数量后缀（如 `浏览_1_5` 表示5个标签）

✅ **智能匹配**: 支持通配符，灵活匹配各种URL模式

✅ **颜色标识**: 9种颜色可选，方便视觉区分

✅ **批量处理**: 一次性处理所有匹配的标签

✅ **规则管理**: 可以随时添加、编辑、删除规则

## 注意事项

⚠️ **已分组标签**: 已经在其他组中的标签不会被重新分组

⚠️ **规则顺序**: 按照规则添加的顺序依次匹配

⚠️ **大小写**: URL匹配不区分大小写

⚠️ **特殊字符**: 如果URL包含特殊字符，请使用完整URL进行匹配

## 快捷操作

- **编辑规则**: 点击规则卡片上的"编辑"按钮
- **删除规则**: 点击规则卡片上的"删除"按钮
- **快速应用**: 在弹出窗口直接点击"按规则分组"

## 与其他功能配合

1. **按域名分组**: 先用域名分组做初步整理
2. **按规则分组**: 再用自定义规则做精细分类
3. **更新组名**: 最后统一更新所有组的名称格式

## 技术说明

- 规则保存在 Chrome 同步存储中
- 支持跨设备同步（如果登录了 Chrome 账号）
- 使用正则表达式进行URL匹配
- 不会影响已有的标签组

## 常见问题

**Q: 为什么有些标签没有被分组？**
A: 检查标签URL是否匹配规则，或者标签是否已经在其他组中。

**Q: 可以同时使用多个规则吗？**
A: 可以，每个规则会独立创建一个分组。

**Q: 规则会自动应用吗？**
A: 不会，需要手动点击"按规则分组"按钮来应用规则。

**Q: 可以修改已有规则吗？**
A: 可以，点击"编辑"按钮即可修改规则。

## 更新日志

### v2026
- ✨ 新增按规则分组功能
- ✨ 新增分组规则设置页面
- ✨ 支持通配符匹配
- ✨ 支持自定义分组颜色
- ✨ 支持规则的增删改查
